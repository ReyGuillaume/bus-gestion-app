(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const s=(e,t,n=null,i=null,r=null,a=null,o=null)=>{let u=t.appendChild(document.createElement(e));return n&&u.appendChild(document.createTextNode(n)),i&&i.forEach(c=>u.classList.add(c)),r&&(u.id=r),a&&(u.src=a),o&&(u.alt=o),u},A=(e,t="text",n=null,i=null)=>{let r=e.appendChild(document.createElement("input"));return t&&r.setAttribute("type",t),n&&r.setAttribute("name",n),i&&r.setAttribute("placeholder",i),r},x=(e,t=null,n=null,i=null)=>{let r=e.appendChild(document.createElement("input"));return r.setAttribute("type","radio"),t&&r.setAttribute("id",t),n&&r.setAttribute("name",n),i&&r.setAttribute("value",i),r},F=(e,t=null,n=null,i=null)=>{let r=e.appendChild(document.createElement("input"));return r.setAttribute("type","checkbox"),t&&r.setAttribute("id",t),n&&r.setAttribute("name",n),i&&r.setAttribute("value",i),r},ye=(e,t)=>{const n=document.querySelector("#fenetreAlerte");n&&n.remove();const i=document.querySelector("#header"),r=s("div",i,null,null,"fenetreAlerte");s("img",r,null,["imageFenetre"]).src="src/assets/images/ok.png",r.style.backgroundColor="rgb(75, 208, 75)";const a=s("div",r,null,null,"contenuFenetre");return s("p",a,e,null,"titreAlerte"),s("p",a,t),setTimeout(()=>{r.remove()},3e3),r},ee=(e,t)=>{const n=document.querySelector("#fenetreAlerte");n&&n.remove();const i=document.querySelector("#header"),r=s("div",i,null,null,"fenetreAlerte");s("img",r,null,["imageFenetre"]).src="src/assets/images/croix.png",r.style.backgroundColor="rgb(176, 66, 66)";const a=s("div",r,null,null,"contenuFenetre");return s("p",a,e,null,"titreAlerte"),s("p",a,t),setTimeout(()=>{r.remove()},3e3),r},On=()=>{const e=document.querySelector("#header"),t=s("nav",e,null,["navBar","hide"]);s("a",t,"Accueil",["navBar__item","focus"]).href="/";const n=JSON.parse(sessionStorage.getItem("userData"));return n?(["Responsable Logistique","Directeur"].includes(n.role)?s("a",t,"Espace administrateur",["navBar__item"]).href="/espaceAdmin":s("a",t,"Espace utilisateur",["navBar__item"]).href="/espaceUser",s("a",t,"Se déconnecter",["navBar__item"]).href="/disconnect"):s("a",t,"Se connecter",["navBar__item"]).href="/connexion",t},Bn=()=>{document.querySelector("#header .navBar").classList.toggle("hide");const e=document.querySelector("#header .toggleNav i");e.classList.toggle("fa-bars"),e.classList.toggle("fa-close")},ct=()=>{const e=document.querySelector("#header");e.replaceChildren("");const t=s("div",e,null,["container"]);s("img",t,null,["logo"],null,"./src/assets/images/gobus-logo-color.png","Gobus Logo");let n=s("p",t,"",null,"infosUser");const i=JSON.parse(sessionStorage.getItem("userData"));if(i){const{id:a,prenom:o,nom:u,role:c,idrole:l}=i;n.textContent=`${o} ${u.toUpperCase()}, ${c}`}const r=s("div",t,null,["toggleNav"]);return r.addEventListener("click",Bn),s("i",r,null,["fa-solid","fa-bars"]),On(),e},qn=()=>{const e=document.querySelector("#footer");e.replaceChildren("");const t=s("ul",e,null,["footerList"]);return["Conditions générales","A propos","Prendre rendez-vous"].forEach(i=>s("li",t,i,["footerList__item"])),e};function Xt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Yt}=Object.prototype,{getPrototypeOf:dt}=Object,ft=(e=>t=>{const n=Yt.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),W=e=>(e=e.toLowerCase(),t=>ft(t)===e),Me=e=>t=>typeof t===e,{isArray:de}=Array,be=Me("undefined");function Nn(e){return e!==null&&!be(e)&&e.constructor!==null&&!be(e.constructor)&&Q(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qt=W("ArrayBuffer");function Pn(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Qt(e.buffer),t}const Un=Me("string"),Q=Me("function"),Zt=Me("number"),pt=e=>e!==null&&typeof e=="object",$n=e=>e===!0||e===!1,De=e=>{if(ft(e)!=="object")return!1;const t=dt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Mn=W("Date"),Fn=W("File"),xn=W("Blob"),Hn=W("FileList"),jn=e=>pt(e)&&Q(e.pipe),In=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||Yt.call(e)===t||Q(e.toString)&&e.toString()===t)},zn=W("URLSearchParams"),Vn=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ee(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,r;if(typeof e!="object"&&(e=[e]),de(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let u;for(i=0;i<o;i++)u=a[i],t.call(null,e[u],u,e)}}function en(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,r;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const tn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),nn=e=>!be(e)&&e!==tn;function Ze(){const{caseless:e}=nn(this)&&this||{},t={},n=(i,r)=>{const a=e&&en(t,r)||r;De(t[a])&&De(i)?t[a]=Ze(t[a],i):De(i)?t[a]=Ze({},i):de(i)?t[a]=i.slice():t[a]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Ee(arguments[i],n);return t}const Gn=(e,t,n,{allOwnKeys:i}={})=>(Ee(t,(r,a)=>{n&&Q(r)?e[a]=Xt(r,n):e[a]=r},{allOwnKeys:i}),e),Jn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Wn=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Kn=(e,t,n,i)=>{let r,a,o;const u={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),a=r.length;a-- >0;)o=r[a],(!i||i(o,e,t))&&!u[o]&&(t[o]=e[o],u[o]=!0);e=n!==!1&&dt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Xn=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},Yn=e=>{if(!e)return null;if(de(e))return e;let t=e.length;if(!Zt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Qn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&dt(Uint8Array)),Zn=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=i.next())&&!r.done;){const a=r.value;t.call(e,a[0],a[1])}},ei=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},ti=W("HTMLFormElement"),ni=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),Tt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ii=W("RegExp"),rn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Ee(n,(r,a)=>{t(r,a,e)!==!1&&(i[a]=r)}),Object.defineProperties(e,i)},ri=e=>{rn(e,(t,n)=>{if(Q(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Q(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},si=(e,t)=>{const n={},i=r=>{r.forEach(a=>{n[a]=!0})};return de(e)?i(e):i(String(e).split(t)),n},ai=()=>{},oi=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ie="abcdefghijklmnopqrstuvwxyz",Ot="0123456789",sn={DIGIT:Ot,ALPHA:Ie,ALPHA_DIGIT:Ie+Ie.toUpperCase()+Ot},ui=(e=16,t=sn.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function li(e){return!!(e&&Q(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ci=e=>{const t=new Array(10),n=(i,r)=>{if(pt(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;const a=de(i)?[]:{};return Ee(i,(o,u)=>{const c=n(o,r+1);!be(c)&&(a[u]=c)}),t[r]=void 0,a}}return i};return n(e,0)},f={isArray:de,isArrayBuffer:Qt,isBuffer:Nn,isFormData:In,isArrayBufferView:Pn,isString:Un,isNumber:Zt,isBoolean:$n,isObject:pt,isPlainObject:De,isUndefined:be,isDate:Mn,isFile:Fn,isBlob:xn,isRegExp:ii,isFunction:Q,isStream:jn,isURLSearchParams:zn,isTypedArray:Qn,isFileList:Hn,forEach:Ee,merge:Ze,extend:Gn,trim:Vn,stripBOM:Jn,inherits:Wn,toFlatObject:Kn,kindOf:ft,kindOfTest:W,endsWith:Xn,toArray:Yn,forEachEntry:Zn,matchAll:ei,isHTMLForm:ti,hasOwnProperty:Tt,hasOwnProp:Tt,reduceDescriptors:rn,freezeMethods:ri,toObjectSet:si,toCamelCase:ni,noop:ai,toFiniteNumber:oi,findKey:en,global:tn,isContextDefined:nn,ALPHABET:sn,generateString:ui,isSpecCompliantForm:li,toJSONObject:ci};function w(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}f.inherits(w,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const an=w.prototype,on={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{on[e]={value:e}});Object.defineProperties(w,on);Object.defineProperty(an,"isAxiosError",{value:!0});w.from=(e,t,n,i,r,a)=>{const o=Object.create(an);return f.toFlatObject(e,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),w.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const di=null;function et(e){return f.isPlainObject(e)||f.isArray(e)}function un(e){return f.endsWith(e,"[]")?e.slice(0,-2):e}function Bt(e,t,n){return e?e.concat(t).map(function(r,a){return r=un(r),!n&&a?"["+r+"]":r}).join(n?".":""):t}function fi(e){return f.isArray(e)&&!e.some(et)}const pi=f.toFlatObject(f,{},null,function(t){return/^is[A-Z]/.test(t)});function Fe(e,t,n){if(!f.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=f.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,k){return!f.isUndefined(k[b])});const i=n.metaTokens,r=n.visitor||d,a=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&f.isSpecCompliantForm(t);if(!f.isFunction(r))throw new TypeError("visitor must be a function");function l(v){if(v===null)return"";if(f.isDate(v))return v.toISOString();if(!c&&f.isBlob(v))throw new w("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(v)||f.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,b,k){let D=v;if(v&&!k&&typeof v=="object"){if(f.endsWith(b,"{}"))b=i?b:b.slice(0,-2),v=JSON.stringify(v);else if(f.isArray(v)&&fi(v)||(f.isFileList(v)||f.endsWith(b,"[]"))&&(D=f.toArray(v)))return b=un(b),D.forEach(function(U,O){!(f.isUndefined(U)||U===null)&&t.append(o===!0?Bt([b],O,a):o===null?b:b+"[]",l(U))}),!1}return et(v)?!0:(t.append(Bt(k,b,a),l(v)),!1)}const m=[],h=Object.assign(pi,{defaultVisitor:d,convertValue:l,isVisitable:et});function y(v,b){if(!f.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(v),f.forEach(v,function(D,N){(!(f.isUndefined(D)||D===null)&&r.call(t,D,f.isString(N)?N.trim():N,b,h))===!0&&y(D,b?b.concat(N):[N])}),m.pop()}}if(!f.isObject(e))throw new TypeError("data must be an object");return y(e),t}function qt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function mt(e,t){this._pairs=[],e&&Fe(e,this,t)}const ln=mt.prototype;ln.append=function(t,n){this._pairs.push([t,n])};ln.toString=function(t){const n=t?function(i){return t.call(this,i,qt)}:qt;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function mi(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cn(e,t,n){if(!t)return e;const i=n&&n.encode||mi,r=n&&n.serialize;let a;if(r?a=r(t,n):a=f.isURLSearchParams(t)?t.toString():new mt(t,n).toString(i),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class hi{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){f.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Nt=hi,dn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vi=typeof URLSearchParams<"u"?URLSearchParams:mt,gi=FormData,bi=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),yi=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),H={isBrowser:!0,classes:{URLSearchParams:vi,FormData:gi,Blob},isStandardBrowserEnv:bi,isStandardBrowserWebWorkerEnv:yi,protocols:["http","https","file","blob","url","data"]};function Ei(e,t){return Fe(e,new H.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,a){return H.isNode&&f.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function Si(e){return f.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Li(e){const t={},n=Object.keys(e);let i;const r=n.length;let a;for(i=0;i<r;i++)a=n[i],t[a]=e[a];return t}function fn(e){function t(n,i,r,a){let o=n[a++];const u=Number.isFinite(+o),c=a>=n.length;return o=!o&&f.isArray(r)?r.length:o,c?(f.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!u):((!r[o]||!f.isObject(r[o]))&&(r[o]=[]),t(n,i,r[o],a)&&f.isArray(r[o])&&(r[o]=Li(r[o])),!u)}if(f.isFormData(e)&&f.isFunction(e.entries)){const n={};return f.forEachEntry(e,(i,r)=>{t(Si(i),r,n,0)}),n}return null}const wi={"Content-Type":void 0};function _i(e,t,n){if(f.isString(e))try{return(t||JSON.parse)(e),f.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const xe={transitional:dn,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,a=f.isObject(t);if(a&&f.isHTMLForm(t)&&(t=new FormData(t)),f.isFormData(t))return r&&r?JSON.stringify(fn(t)):t;if(f.isArrayBuffer(t)||f.isBuffer(t)||f.isStream(t)||f.isFile(t)||f.isBlob(t))return t;if(f.isArrayBufferView(t))return t.buffer;if(f.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Ei(t,this.formSerializer).toString();if((u=f.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Fe(u?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||r?(n.setContentType("application/json",!1),_i(t)):t}],transformResponse:[function(t){const n=this.transitional||xe.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(t&&f.isString(t)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(u){if(o)throw u.name==="SyntaxError"?w.from(u,w.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:H.classes.FormData,Blob:H.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};f.forEach(["delete","get","head"],function(t){xe.headers[t]={}});f.forEach(["post","put","patch"],function(t){xe.headers[t]=f.merge(wi)});const ht=xe,Ai=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Di=e=>{const t={};let n,i,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||t[n]&&Ai[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Pt=Symbol("internals");function ve(e){return e&&String(e).trim().toLowerCase()}function Re(e){return e===!1||e==null?e:f.isArray(e)?e.map(Re):String(e)}function Ri(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}function ki(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function ze(e,t,n,i){if(f.isFunction(i))return i.call(this,t,n);if(f.isString(t)){if(f.isString(i))return t.indexOf(i)!==-1;if(f.isRegExp(i))return i.test(t)}}function Ci(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Ti(e,t){const n=f.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(r,a,o){return this[i].call(this,t,r,a,o)},configurable:!0})})}class He{constructor(t){t&&this.set(t)}set(t,n,i){const r=this;function a(u,c,l){const d=ve(c);if(!d)throw new Error("header name must be a non-empty string");const m=f.findKey(r,d);(!m||r[m]===void 0||l===!0||l===void 0&&r[m]!==!1)&&(r[m||c]=Re(u))}const o=(u,c)=>f.forEach(u,(l,d)=>a(l,d,c));return f.isPlainObject(t)||t instanceof this.constructor?o(t,n):f.isString(t)&&(t=t.trim())&&!ki(t)?o(Di(t),n):t!=null&&a(n,t,i),this}get(t,n){if(t=ve(t),t){const i=f.findKey(this,t);if(i){const r=this[i];if(!n)return r;if(n===!0)return Ri(r);if(f.isFunction(n))return n.call(this,r,i);if(f.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ve(t),t){const i=f.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||ze(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let r=!1;function a(o){if(o=ve(o),o){const u=f.findKey(i,o);u&&(!n||ze(i,i[u],u,n))&&(delete i[u],r=!0)}}return f.isArray(t)?t.forEach(a):a(t),r}clear(t){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const a=n[i];(!t||ze(this,this[a],a,t))&&(delete this[a],r=!0)}return r}normalize(t){const n=this,i={};return f.forEach(this,(r,a)=>{const o=f.findKey(i,a);if(o){n[o]=Re(r),delete n[a];return}const u=t?Ci(a):String(a).trim();u!==a&&delete n[a],n[u]=Re(r),i[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return f.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=t&&f.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[Pt]=this[Pt]={accessors:{}}).accessors,r=this.prototype;function a(o){const u=ve(o);i[u]||(Ti(r,o),i[u]=!0)}return f.isArray(t)?t.forEach(a):a(t),this}}He.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);f.freezeMethods(He.prototype);f.freezeMethods(He);const J=He;function Ve(e,t){const n=this||ht,i=t||n,r=J.from(i.headers);let a=i.data;return f.forEach(e,function(u){a=u.call(n,a,r.normalize(),t?t.status:void 0)}),r.normalize(),a}function pn(e){return!!(e&&e.__CANCEL__)}function Se(e,t,n){w.call(this,e??"canceled",w.ERR_CANCELED,t,n),this.name="CanceledError"}f.inherits(Se,w,{__CANCEL__:!0});function Oi(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new w("Request failed with status code "+n.status,[w.ERR_BAD_REQUEST,w.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Bi=H.isStandardBrowserEnv?function(){return{write:function(n,i,r,a,o,u){const c=[];c.push(n+"="+encodeURIComponent(i)),f.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),f.isString(a)&&c.push("path="+a),f.isString(o)&&c.push("domain="+o),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function qi(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ni(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function mn(e,t){return e&&!qi(t)?Ni(e,t):t}const Pi=H.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(a){let o=a;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){const u=f.isString(o)?r(o):o;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}();function Ui(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function $i(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),d=i[a];o||(o=l),n[r]=c,i[r]=l;let m=a,h=0;for(;m!==r;)h+=n[m++],m=m%e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),l-o<t)return;const y=d&&l-d;return y?Math.round(h*1e3/y):void 0}}function Ut(e,t){let n=0;const i=$i(50,250);return r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,u=a-n,c=i(u),l=a<=o;n=a;const d={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:c||void 0,estimated:c&&o&&l?(o-a)/c:void 0,event:r};d[t?"download":"upload"]=!0,e(d)}}const Mi=typeof XMLHttpRequest<"u",Fi=Mi&&function(e){return new Promise(function(n,i){let r=e.data;const a=J.from(e.headers).normalize(),o=e.responseType;let u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}f.isFormData(r)&&(H.isStandardBrowserEnv||H.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);let l=new XMLHttpRequest;if(e.auth){const y=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(y+":"+v))}const d=mn(e.baseURL,e.url);l.open(e.method.toUpperCase(),cn(d,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function m(){if(!l)return;const y=J.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),b={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:y,config:e,request:l};Oi(function(D){n(D),c()},function(D){i(D),c()},b),l=null}if("onloadend"in l?l.onloadend=m:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(m)},l.onabort=function(){l&&(i(new w("Request aborted",w.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new w("Network Error",w.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let v=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const b=e.transitional||dn;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i(new w(v,b.clarifyTimeoutError?w.ETIMEDOUT:w.ECONNABORTED,e,l)),l=null},H.isStandardBrowserEnv){const y=(e.withCredentials||Pi(d))&&e.xsrfCookieName&&Bi.read(e.xsrfCookieName);y&&a.set(e.xsrfHeaderName,y)}r===void 0&&a.setContentType(null),"setRequestHeader"in l&&f.forEach(a.toJSON(),function(v,b){l.setRequestHeader(b,v)}),f.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&o!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",Ut(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Ut(e.onUploadProgress)),(e.cancelToken||e.signal)&&(u=y=>{l&&(i(!y||y.type?new Se(null,e,l):y),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u)));const h=Ui(d);if(h&&H.protocols.indexOf(h)===-1){i(new w("Unsupported protocol "+h+":",w.ERR_BAD_REQUEST,e));return}l.send(r||null)})},ke={http:di,xhr:Fi};f.forEach(ke,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const xi={getAdapter:e=>{e=f.isArray(e)?e:[e];const{length:t}=e;let n,i;for(let r=0;r<t&&(n=e[r],!(i=f.isString(n)?ke[n.toLowerCase()]:n));r++);if(!i)throw i===!1?new w(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(f.hasOwnProp(ke,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!f.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:ke};function Ge(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Se(null,e)}function $t(e){return Ge(e),e.headers=J.from(e.headers),e.data=Ve.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),xi.getAdapter(e.adapter||ht.adapter)(e).then(function(i){return Ge(e),i.data=Ve.call(e,e.transformResponse,i),i.headers=J.from(i.headers),i},function(i){return pn(i)||(Ge(e),i&&i.response&&(i.response.data=Ve.call(e,e.transformResponse,i.response),i.response.headers=J.from(i.response.headers))),Promise.reject(i)})}const Mt=e=>e instanceof J?e.toJSON():e;function le(e,t){t=t||{};const n={};function i(l,d,m){return f.isPlainObject(l)&&f.isPlainObject(d)?f.merge.call({caseless:m},l,d):f.isPlainObject(d)?f.merge({},d):f.isArray(d)?d.slice():d}function r(l,d,m){if(f.isUndefined(d)){if(!f.isUndefined(l))return i(void 0,l,m)}else return i(l,d,m)}function a(l,d){if(!f.isUndefined(d))return i(void 0,d)}function o(l,d){if(f.isUndefined(d)){if(!f.isUndefined(l))return i(void 0,l)}else return i(void 0,d)}function u(l,d,m){if(m in t)return i(l,d);if(m in e)return i(void 0,l)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(l,d)=>r(Mt(l),Mt(d),!0)};return f.forEach(Object.keys(e).concat(Object.keys(t)),function(d){const m=c[d]||r,h=m(e[d],t[d],d);f.isUndefined(h)&&m!==u||(n[d]=h)}),n}const hn="1.3.2",vt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{vt[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Ft={};vt.transitional=function(t,n,i){function r(a,o){return"[Axios v"+hn+"] Transitional option '"+a+"'"+o+(i?". "+i:"")}return(a,o,u)=>{if(t===!1)throw new w(r(o," has been removed"+(n?" in "+n:"")),w.ERR_DEPRECATED);return n&&!Ft[o]&&(Ft[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,u):!0}};function Hi(e,t,n){if(typeof e!="object")throw new w("options must be an object",w.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const a=i[r],o=t[a];if(o){const u=e[a],c=u===void 0||o(u,a,e);if(c!==!0)throw new w("option "+a+" must be "+c,w.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new w("Unknown option "+a,w.ERR_BAD_OPTION)}}const tt={assertOptions:Hi,validators:vt},Y=tt.validators;class Te{constructor(t){this.defaults=t,this.interceptors={request:new Nt,response:new Nt}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=le(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:a}=n;i!==void 0&&tt.assertOptions(i,{silentJSONParsing:Y.transitional(Y.boolean),forcedJSONParsing:Y.transitional(Y.boolean),clarifyTimeoutError:Y.transitional(Y.boolean)},!1),r!==void 0&&tt.assertOptions(r,{encode:Y.function,serialize:Y.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=a&&f.merge(a.common,a[n.method]),o&&f.forEach(["delete","get","head","post","put","patch","common"],v=>{delete a[v]}),n.headers=J.concat(o,a);const u=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,u.unshift(b.fulfilled,b.rejected))});const l=[];this.interceptors.response.forEach(function(b){l.push(b.fulfilled,b.rejected)});let d,m=0,h;if(!c){const v=[$t.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,l),h=v.length,d=Promise.resolve(n);m<h;)d=d.then(v[m++],v[m++]);return d}h=u.length;let y=n;for(m=0;m<h;){const v=u[m++],b=u[m++];try{y=v(y)}catch(k){b.call(this,k);break}}try{d=$t.call(this,y)}catch(v){return Promise.reject(v)}for(m=0,h=l.length;m<h;)d=d.then(l[m++],l[m++]);return d}getUri(t){t=le(this.defaults,t);const n=mn(t.baseURL,t.url);return cn(n,t.params,t.paramsSerializer)}}f.forEach(["delete","get","head","options"],function(t){Te.prototype[t]=function(n,i){return this.request(le(i||{},{method:t,url:n,data:(i||{}).data}))}});f.forEach(["post","put","patch"],function(t){function n(i){return function(a,o,u){return this.request(le(u||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Te.prototype[t]=n(),Te.prototype[t+"Form"]=n(!0)});const Ce=Te;class gt{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(r=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](r);i._listeners=null}),this.promise.then=r=>{let a;const o=new Promise(u=>{i.subscribe(u),a=u}).then(r);return o.cancel=function(){i.unsubscribe(a)},o},t(function(a,o,u){i.reason||(i.reason=new Se(a,o,u),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new gt(function(r){t=r}),cancel:t}}}const ji=gt;function Ii(e){return function(n){return e.apply(null,n)}}function zi(e){return f.isObject(e)&&e.isAxiosError===!0}const nt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nt).forEach(([e,t])=>{nt[t]=e});const Vi=nt;function vn(e){const t=new Ce(e),n=Xt(Ce.prototype.request,t);return f.extend(n,Ce.prototype,t,{allOwnKeys:!0}),f.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return vn(le(e,r))},n}const q=vn(ht);q.Axios=Ce;q.CanceledError=Se;q.CancelToken=ji;q.isCancel=pn;q.VERSION=hn;q.toFormData=Fe;q.AxiosError=w;q.Cancel=q.CanceledError;q.all=function(t){return Promise.all(t)};q.spread=Ii;q.isAxiosError=zi;q.mergeConfig=le;q.AxiosHeaders=J;q.formToJSON=e=>fn(f.isHTMLForm(e)?new FormData(e):e);q.HttpStatusCode=Vi;q.default=q;const S=q;var Gi=/([:*])(\w+)/g,Ji="([^/]+)",Wi=/\*/g,Ki="?(?:.*)",Xi=/\/\?/g,Yi="/?([^/]+|)",Qi="(?:/^|^)",Zi="";function gn(e){return e===void 0&&(e="/"),yt()?location.pathname+location.search+location.hash:e}function C(e){return e.replace(/\/+$/,"").replace(/^\/+/,"")}function Oe(e){return typeof e=="string"}function er(e){return typeof e=="function"}function Be(e){return e&&e.indexOf("#")>=0&&e.split("#").pop()||""}function tr(e,t){return t.length===0||!e?null:e.slice(1,e.length).reduce(function(n,i,r){return n===null&&(n={}),n[t[r]]=decodeURIComponent(i),n},null)}function qe(e){var t=C(e).split(/\?(.*)?$/);return[C(t[0]),t.slice(1).join("")]}function bt(e){for(var t={},n=e.split("&"),i=0;i<n.length;i++){var r=n[i].split("=");if(r[0]!==""){var a=decodeURIComponent(r[0]);t[a]?(Array.isArray(t[a])||(t[a]=[t[a]]),t[a].push(decodeURIComponent(r[1]||""))):t[a]=decodeURIComponent(r[1]||"")}}return t}function bn(e,t){var n=qe(C(e.currentLocationPath)),i=n[0],r=n[1],a=r===""?null:bt(r),o=[],u;if(Oe(t.path)){if(u=Qi+C(t.path).replace(Gi,function(m,h,y){return o.push(y),Ji}).replace(Wi,Ki).replace(Xi,Yi)+"$",C(t.path)===""&&C(i)==="")return{url:i,queryString:r,hashString:Be(e.to),route:t,data:null,params:a}}else u=t.path;var c=new RegExp(u,Zi),l=i.match(c);if(l){var d=Oe(t.path)?tr(l,o):l.groups?l.groups:l.slice(1);return{url:C(i.replace(new RegExp("^"+e.instance.root),"")),queryString:r,hashString:Be(e.to),route:t,data:d,params:a}}return!1}function yn(){return!!(typeof window<"u"&&window.history&&window.history.pushState)}function re(e,t){return typeof e[t]>"u"||e[t]===!0}function nr(e){if(!e)return{};var t=e.split(","),n={},i;return t.forEach(function(r){var a=r.split(":").map(function(o){return o.replace(/(^ +| +$)/g,"")});switch(a[0]){case"historyAPIMethod":n.historyAPIMethod=a[1];break;case"resolveOptionsStrategy":i||(i={}),i.strategy=a[1];break;case"resolveOptionsHash":i||(i={}),i.hash=a[1]==="true";break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":n[a[0]]=a[1]==="true";break}}),i&&(n.resolveOptions=i),n}function yt(){return typeof window<"u"}function ir(e,t){return e===void 0&&(e=[]),t===void 0&&(t={}),e.filter(function(n){return n}).forEach(function(n){["before","after","already","leave"].forEach(function(i){n[i]&&(t[i]||(t[i]=[]),t[i].push(n[i]))})}),t}function j(e,t,n){var i=t||{},r=0;(function a(){if(!e[r]){n&&n(i);return}Array.isArray(e[r])?(e.splice.apply(e,[r,1].concat(e[r][0](i)?e[r][1]:e[r][2])),a()):e[r](i,function(o){typeof o>"u"||o===!0?(r+=1,a()):n&&n(i)})})()}j.if=function(e,t,n){return Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]),[e,t,n]};function xt(e,t){typeof e.currentLocationPath>"u"&&(e.currentLocationPath=e.to=gn(e.instance.root)),e.currentLocationPath=e.instance._checkForAHash(e.currentLocationPath),t()}function Je(e,t){for(var n=0;n<e.instance.routes.length;n++){var i=e.instance.routes[n],r=bn(e,i);if(r&&(e.matches||(e.matches=[]),e.matches.push(r),e.resolveOptions.strategy==="ONE")){t();return}}t()}function rr(e,t){e.navigateOptions&&(typeof e.navigateOptions.shouldResolve<"u"&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),typeof e.navigateOptions.silent<"u"&&console.warn('"silent" is deprecated. Please check the documentation.')),t()}function sr(e,t){e.navigateOptions.force===!0?(e.instance._setCurrent([e.instance._pathToMatchObject(e.to)]),t(!1)):t()}var Ht=yt(),ar=yn();function or(e,t){if(re(e.navigateOptions,"updateBrowserURL")){var n=("/"+e.to).replace(/\/\//g,"/"),i=Ht&&e.resolveOptions&&e.resolveOptions.hash===!0;ar?(history[e.navigateOptions.historyAPIMethod||"pushState"](e.navigateOptions.stateObj||{},e.navigateOptions.title||"",i?"#"+n:n),location&&location.hash&&(e.instance.__freezeListening=!0,setTimeout(function(){if(!i){var r=location.hash;location.hash="",location.hash=r}e.instance.__freezeListening=!1},1))):Ht&&(window.location.href=e.to)}t()}function En(e,t){var n=e.instance;if(!n.lastResolved()){t();return}j(n.lastResolved().map(function(i){return function(r,a){if(!i.route.hooks||!i.route.hooks.leave){a();return}var o=!1,u=e.instance.matchLocation(i.route.path,e.currentLocationPath,!1);if(i.route.path!=="*")o=!u;else{var c=e.matches?e.matches.find(function(l){return i.route.path===l.route.path}):!1;o=!c}if(re(e.navigateOptions,"callHooks")&&o){j(i.route.hooks.leave.map(function(l){return function(d,m){return l(function(h){h===!1?e.instance.__markAsClean(e):m()},e.matches&&e.matches.length>0?e.matches.length===1?e.matches[0]:e.matches:void 0)}}).concat([function(){return a()}]));return}else a()}}),{},function(){return t()})}function ur(e,t){e.match.route.hooks&&e.match.route.hooks.before&&re(e.navigateOptions,"callHooks")?j(e.match.route.hooks.before.map(function(n){return function(r,a){return n(function(o){o===!1?e.instance.__markAsClean(e):a()},e.match)}}).concat([function(){return t()}])):t()}function lr(e,t){re(e.navigateOptions,"callHandler")&&e.match.route.handler(e.match),e.instance.updatePageLinks(),t()}function cr(e,t){e.match.route.hooks&&e.match.route.hooks.after&&re(e.navigateOptions,"callHooks")&&e.match.route.hooks.after.forEach(function(n){return n(e.match)}),t()}function dr(e,t){var n=e.instance.lastResolved();if(n&&n[0]&&n[0].route===e.match.route&&n[0].url===e.match.url&&n[0].queryString===e.match.queryString){n.forEach(function(i){i.route.hooks&&i.route.hooks.already&&re(e.navigateOptions,"callHooks")&&i.route.hooks.already.forEach(function(r){return r(e.match)})}),t(!1);return}t()}function fr(e,t){var n=e.instance._notFoundRoute;if(n){e.notFoundHandled=!0;var i=qe(e.currentLocationPath),r=i[0],a=i[1],o=Be(e.to);n.path=C(r);var u={url:n.path,queryString:a,hashString:o,data:null,route:n,params:a!==""?bt(a):null};e.matches=[u],e.match=u}t()}function pr(e,t){(!e.resolveOptions||e.resolveOptions.noMatchWarning===!1||typeof e.resolveOptions.noMatchWarning>"u")&&console.warn('Navigo: "'+e.currentLocationPath+`" didn't match any of the registered routes.`),t()}function mr(e,t){e.instance._setCurrent(null),t()}function Sn(e,t){re(e.navigateOptions,"updateState")&&e.instance._setCurrent(e.matches),t()}var Ln=[dr,ur,lr,cr],jt=[En,fr,j.if(function(e){var t=e.notFoundHandled;return t},Ln.concat([Sn]),[pr,mr])];function it(){return it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},it.apply(this,arguments)}function It(e,t){var n=0;function i(){if(n===e.matches.length){Sn(e,t);return}j(Ln,it({},e,{match:e.matches[n]}),function(){n+=1,i()})}En(e,i)}function We(e){e.instance.__markAsClean(e)}function rt(){return rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rt.apply(this,arguments)}var zt="[data-navigo]";function hr(e,t){var n=t||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:zt},i=this,r="/",a=null,o=[],u=!1,c,l=yn(),d=yt();e?r=C(e):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.');function m(p){return p.indexOf("#")>=0&&(n.hash===!0?p=p.split("#")[1]||"/":p=p.split("#")[0]),p}function h(p){return C(r+"/"+C(p))}function y(p,g,E,R){return p=Oe(p)?h(p):p,{name:R||C(String(p)),path:p,handler:g,hooks:ir(E)}}function v(p,g,E){var R=this;return typeof p=="object"&&!(p instanceof RegExp)?(Object.keys(p).forEach(function(_){if(typeof p[_]=="function")R.on(_,p[_]);else{var M=p[_],K=M.uses,_e=M.as,Ae=M.hooks;o.push(y(_,K,[c,Ae],_e))}}),this):(typeof p=="function"&&(E=g,g=p,p=r),o.push(y(p,g,[c,E])),this)}function b(p,g){if(i.__dirty){i.__waiting.push(function(){return i.resolve(p,g)});return}else i.__dirty=!0;p=p?C(r)+"/"+C(p):void 0;var E={instance:i,to:p,currentLocationPath:p,navigateOptions:{},resolveOptions:rt({},n,g)};return j([xt,Je,j.if(function(R){var _=R.matches;return _&&_.length>0},It,jt)],E,We),E.matches?E.matches:!1}function k(p,g){if(i.__dirty){i.__waiting.push(function(){return i.navigate(p,g)});return}else i.__dirty=!0;p=C(r)+"/"+C(p);var E={instance:i,to:p,navigateOptions:g||{},resolveOptions:g&&g.resolveOptions?g.resolveOptions:n,currentLocationPath:m(p)};j([rr,sr,Je,j.if(function(R){var _=R.matches;return _&&_.length>0},It,jt),or,We],E,We)}function D(p,g,E){var R=me(p,g);return R!==null?(k(R.replace(new RegExp("^/?"+r),""),E),!0):!1}function N(p){return this.routes=o=o.filter(function(g){return Oe(p)?C(g.path)!==C(p):er(p)?p!==g.handler:String(g.path)!==String(p)}),this}function U(){l&&(this.__popstateListener=function(){i.__freezeListening||b()},window.addEventListener("popstate",this.__popstateListener))}function O(){this.routes=o=[],l&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=u=!0}function z(p,g){return i._notFoundRoute=y("*",p,[c,g],"__NOT_FOUND__"),this}function B(){if(d)return se().forEach(function(p){if(p.getAttribute("data-navigo")==="false"||p.getAttribute("target")==="_blank"){p.hasListenerAttached&&p.removeEventListener("click",p.navigoHandler);return}p.hasListenerAttached||(p.hasListenerAttached=!0,p.navigoHandler=function(g){if((g.ctrlKey||g.metaKey)&&g.target.tagName.toLowerCase()==="a")return!1;var E=p.getAttribute("href");if(typeof E>"u"||E===null)return!1;if(E.match(/^(http|https)/)&&typeof URL<"u")try{var R=new URL(E);E=R.pathname+R.search}catch{}var _=nr(p.getAttribute("data-navigo-options"));u||(g.preventDefault(),g.stopPropagation(),i.navigate(C(E),_))},p.addEventListener("click",p.navigoHandler))}),i}function se(){return d?[].slice.call(document.querySelectorAll(n.linksSelector||zt)):[]}function ne(p){return"/"+r+"/"+C(p)}function ae(p){return c=p,this}function V(){return a}function me(p,g,E){var R=o.find(function(K){return K.name===p}),_=null;if(R){if(_=R.path,g)for(var M in g)_=_.replace(":"+M,g[M]);_=_.match(/^\//)?_:"/"+_}return _&&E&&!E.includeRoot&&(_=_.replace(new RegExp("^/"+r),"")),_}function je(p){return p.getAttribute("href")}function Le(p){var g=qe(C(p)),E=g[0],R=g[1],_=R===""?null:bt(R),M=Be(p),K=y(E,function(){},[c],E);return{url:E,queryString:R,hashString:M,route:K,data:null,params:_}}function he(){return Le(C(gn(r)).replace(new RegExp("^"+r),""))}function oe(p){var g={instance:i,currentLocationPath:p,to:p,navigateOptions:{},resolveOptions:n};return Je(g,function(){}),g.matches?g.matches:!1}function G(p,g,E){typeof g<"u"&&(typeof E>"u"||E)&&(g=h(g));var R={instance:i,to:g,currentLocationPath:g};xt(R,function(){}),typeof p=="string"&&(p=typeof E>"u"||E?h(p):p);var _=bn(R,{name:String(p),path:p,handler:function(){},hooks:{}});return _||!1}function ue(p,g,E){return typeof g=="string"&&(g=ie(g)),g?(g.hooks[p]||(g.hooks[p]=[]),g.hooks[p].push(E),function(){g.hooks[p]=g.hooks[p].filter(function(R){return R!==E})}):(console.warn("Route doesn't exists: "+g),function(){})}function ie(p){return typeof p=="string"?o.find(function(g){return g.name===h(p)}):o.find(function(g){return g.handler===p})}function we(p){p.instance.__dirty=!1,p.instance.__waiting.length>0&&p.instance.__waiting.shift()()}this.root=r,this.routes=o,this.destroyed=u,this.current=a,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=we,this.on=v,this.off=N,this.resolve=b,this.navigate=k,this.navigateByName=D,this.destroy=O,this.notFound=z,this.updatePageLinks=B,this.link=ne,this.hooks=ae,this.extractGETParameters=function(p){return qe(m(p))},this.lastResolved=V,this.generate=me,this.getLinkPath=je,this.match=oe,this.matchLocation=G,this.getCurrentLocation=he,this.addBeforeHook=ue.bind(this,"before"),this.addAfterHook=ue.bind(this,"after"),this.addAlreadyHook=ue.bind(this,"already"),this.addLeaveHook=ue.bind(this,"leave"),this.getRoute=ie,this._pathToMatchObject=Le,this._clean=C,this._checkForAHash=m,this._setCurrent=function(p){return a=i.current=p},U.call(this),B.call(this)}const vr=()=>{const e=document.querySelector("#app");e.replaceChildren("");const t=JSON.parse(sessionStorage.getItem("userData"));s("h2",e,"Bienvenue sur GoBus, la solution collaborative pour la gestion de vos trajets en bus !",null,"titreAccueil");const n=s("div",e,null,["paragraphe"]),i=s("h3",n);s("span",i,"GoBus",["GoBus_titre"]),i.innerHTML+=" permet au ",s("span",i,"seul",["GoBus_role"]),i.innerHTML+=" gérant, aux ",s("span",i,"2",["GoBus_role"]),i.innerHTML+=" responsables logistiques ainsi qu'aux ",s("span",i,"6",["GoBus_role"]),i.innerHTML+=" chauffeurs de bus de planifier leur emploi du temps de manière optimale, collaborative et en temps réel.",s("img",n,null,null,"imgPres").src="src/assets/images/bus.png";const r=s("div",e,null,["paragraphe"]);s("h3",r,"Vous êtes un chauffeur de bus ?",["phrasePres"]);const a=s("p",r,null,["sous_paragraphe"]);s("span",a,"Consultez",["GoBus_role"]),a.innerHTML+=" donc votre emploi du temps personnel, et ",s("span",a,"indiquez",["GoBus_role"]),a.innerHTML+=" vos créneaux d'indisponibilité !",t?t.role!="Conducteur"?s("a",r,"Voir votre espace utilisateur").href="/":s("a",r,"Voir votre espace utilisateur").href="/espace-utilisateur":s("a",r,"Voir votre espace utilisateur").href="/connexion";const o=s("div",e,null,["paragraphe"]);s("h3",o,"Vous êtes un responsable logistique chargé d'administrer des chauffeurs de bus ?",["phrasePres"]);const u=s("p",o,null,["sous_paragraphe"]);s("span",u,"Accédez",["GoBus_role"]),u.innerHTML+=" donc à leur emploi du temps, et ",s("span",u,"affectez",["GoBus_role"]),u.innerHTML+=" leur des créneaux de conduite afin de piloter les différentes lignes de bus à disposition !",t?t.role!="Responsable Logistique"?s("a",o,"Voir votre espace administrateur").href="/":s("a",o,"Voir votre espace administrateur").href="/espace-admin":s("a",o,"Voir votre espace administrateur").href="/connexion";const c=s("div",e,null,["paragraphe"]);s("h3",c,"Vous êtes un gérant en charge d'un réseau de bus ?",["phrasePres"]);const l=s("p",c,null,["sous_paragraphe"]);s("span",l,"Organisez",["GoBus_role"]),l.innerHTML+=" et ",s("span",l,"planifiez",["GoBus_role"]),l.innerHTML+=" des réunions, ",s("span",l,"gérez",["GoBus_role"]),l.innerHTML+=" et ",s("span",l,"visualisez",["GoBus_role"]),l.innerHTML+=" l'emploi du temps des différentes lignes de bus !",t?t.role!="Directeur"?s("a",c,"Voir votre espace administrateur").href="/":s("a",c,"Voir votre espace administrateur").href="/espace-admin":s("a",c,"Voir votre espace administrateur").href="/connexion";const d=s("div",e,null,["paragraphe","paragraphe_info"]);s("p",d,"Notre plateforme intuitive offre une interface facile à utiliser pour chacun des utilisateurs, ainsi qu'une vue d'ensemble en temps réel de l'emploi du temps de l'ensemble de l'entreprise. ");const m=s("p",d);if(s("span",m,"GoBus",["GoBus_titre"]),m.innerHTML+=" est conçu pour être une solution simple et efficace pour la planification collaborative, aidant ses employés à économiser du temps et à augmenter leur productivité.",!t){const h=s("div",e,null,["paragraphe"]),y=s("p",h);s("span",y,"Connectez-vous",["GoBus_role"]),y.innerHTML+=" dès maintenant pour découvrir toutes les fonctionnalités de ",s("span",y,"GoBus",["GoBus_titre"]),y.innerHTML+=".",s("a",h,"Connexion").href="/connexion"}return e},L=e=>{console.log(2),window.location=e},fe=(e=()=>null,t=()=>null,n=()=>null,i=()=>null)=>{console.log(1);let r=JSON.parse(sessionStorage.getItem("userData"));if(r)switch(r.idrole){case"1":e();break;case"2":t();break;case"3":n();break;default:i();break}else window.location="/connexion"},gr=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("h2",e,"Formulaire d'authentification");const t=s("div",e,null,null,"adminFormulaire");s("label",t,"Login :"),A(t,"text","login"),s("label",t,"Password :"),A(t,"password","password"),s("button",t,"Envoyer",null,"adminButton").addEventListener("click",function(){let i=document.querySelector("input[name='login']").value,r=document.querySelector("input[name='password']").value;i=i.replace("'",""),r=r.replace("'",""),S.get("users/users.php?function=authentification&login="+i+"&password="+r).then(function(a){let o=a.data;if(o){let u=o.id,c=o.lastname,l=o.firstname,d=o.name,m=o.idrole;const h={id:u,prenom:l,nom:c,role:d,idrole:m};sessionStorage.setItem("userData",JSON.stringify(h)),ct(),fe(()=>L("/espace-admin"),()=>L("/espace-admin"),()=>L("/espace-utilisateur"))}else ee("ATTENTION","Formulaire invalide !")})})},br=()=>{sessionStorage.removeItem("userData"),ct(),L("/")},yr=()=>{const e=document.querySelector("#app");return e.replaceChildren(""),s("h1",e,"404 not found"),s("h3",e,"Vous êtes perdus ?"),s("a",e,"Retour à l'accueil").href="/",e},ce=e=>{switch(e){case 0:return"Dimanche";case 1:return"Lundi";case 2:return"Mardi";case 3:return"Mercredi";case 4:return"Jeudi";case 5:return"Vendredi";case 6:return"Samedi";default:return null}},Ne=e=>{switch(e){case 0:return"Janvier";case 1:return"Février";case 2:return"Mars";case 3:return"Avril";case 4:return"Mai";case 5:return"Juin";case 6:return"Juillet";case 7:return"Août";case 8:return"Septembre";case 9:return"Octobre";case 10:return"Novembre";case 11:return"Décembre";default:return null}},Er=e=>{switch(e.toLowerCase()){case"dimanche":return 0;case"lundi":return 1;case"mardi":return 2;case"mercredi":return 3;case"jeudi":return 4;case"vendredi":return 5;case"samedi":return 6;default:return null}},Pe=e=>e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),T=e=>e<10?"0"+e:e,Sr=e=>{let t=new Date(e),n=ce(t.getDay());for(;n!="Lundi";)t=new Date(new Date(t).setDate(t.getDate()-1)),n=ce(t.getDay());return t},Lr=(e,t)=>t<=15||t<=45?e:(e+1)%24,wr=e=>e>=45||e<15?0:30,_r=e=>{let t=Math.floor(e/60),n=e%60;return t<10&&(t="0"+t),n<10&&(n="0"+n),t+"h"+n};function I(e){for(var t of document.querySelectorAll(e))if(t.checked)return t.value}const Et=e=>{let t="";for(let n of document.querySelectorAll(e))n.checked&&(t+=t!=""?",":"",t+=n.value);return t},$=(e,t,n,i)=>{S.get(e).then(r=>{t(),r.data?ye("BRAVO",n):ee("ERREUR",i)})},Ue=(e,t,n)=>{F(e,t.id,n,t.id);var i=s("label",e,t.id);i.setAttribute("for",t.id)},St=(e,t,n,i,r)=>{S.get(e).then(a=>{for(var o of a.data)S.get(t+o).then(u=>{let c=u.data;F(n,c.id,i,c.id);var l=s("label",n,r(c));l.setAttribute("for",c.id)})})};function Ar(e){return e.replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')}const Lt=()=>Et("input[name='selectionParticipant']"),Dr=()=>Et("input[name='selectionConducteurs']"),wn=()=>Et("input[name='selectionBus']"),Vt=()=>I("input[name='selectionType']"),_n=()=>I("input[name='selectionDirection']"),An=()=>I("input[name='selectionLigne']"),Rr=()=>({users:Lt(),drivers:Dr(),buses:wn(),line:An(),direction:_n()});function st(e){var t=document.querySelector("#divCheckboxBus");t?t.replaceChildren(""):(t=s("div",e),t.setAttribute("id","divCheckboxBus")),s("label",t,"Choisissez les bus participants :"),S.get("buses/buses.php?function=buses").then(i=>{for(var r of i.data){F(t,r.id,"selectionBus",r.id);var a=s("label",t,r.id);a.setAttribute("for",r.id)}});var n=s("button",t,"Afficher seulement les bus disponibles");n.addEventListener("click",function(i){i.preventDefault(),kr(e)})}function kr(e){var t=document.querySelector("#divCheckboxBus");t.replaceChildren("");let n=document.querySelector("input[name='StartDateTime']").value,i=document.querySelector("input[name='EndDateTime']").value;s("label",t,"Choisissez les bus parmis ceux disponibles :");let r=`buses/buses.php?function=freeBuses&beginning=${n}&end=${i}`;St(r,"buses/buses.php?function=bus&id=",t,"selectionBus",o=>o.id);var a=s("button",t,"Afficher tous les bus");a.addEventListener("click",function(o){o.preventDefault(),st(e)})}function at(e){var t=document.querySelector("#divCheckboxUsers");t?t.replaceChildren(""):(t=s("div",e),t.setAttribute("id","divCheckboxUsers")),s("label",t,"Choisissez les participants :"),S.get("users/users.php?function=users").then(i=>{for(var r of i.data){F(t,r.id,"selectionParticipant",r.id);var a=s("label",t,r.name+" "+r.firstname);a.setAttribute("for",r.id)}});var n=s("button",t,"Afficher seulement les utilisateur disponibles");n.addEventListener("click",function(i){i.preventDefault(),Cr(e)})}function Cr(e){var t=document.querySelector("#divCheckboxUsers");t.replaceChildren("");let n=document.querySelector("input[name='StartDateTime']").value,i=document.querySelector("input[name='EndDateTime']").value;s("label",t,"Choisissez les participants parmis ceux disponibles :");let r=`users/users.php?function=freeUsers&beginning=${n}&end=${i}`;St(r,"users/users.php?function=user&id=",t,"selectionParticipant",o=>`${o.name} ${o.firstname}`);var a=s("button",t,"Afficher tous les utilisateurs");a.addEventListener("click",function(o){o.preventDefault(),at(e)})}function ot(e){var t=document.querySelector("#divCheckboxDrivers");t?t.replaceChildren(""):(t=s("div",e),t.setAttribute("id","divCheckboxDrivers")),s("label",t,"Choisissez le(s) conducteur(s) :"),S.get("users/users.php?function=users").then(i=>{for(var r of i.data)if(r.id_user_type==3){F(t,r.id,"selectionConducteurs",r.id);var a=s("label",t,r.name+" "+r.firstname);a.setAttribute("for",r.id)}});var n=s("button",t,"Afficher seulement les conducteurs disponibles");n.addEventListener("click",function(i){i.preventDefault(),Tr(e)})}function Tr(e){var t=document.querySelector("#divCheckboxDrivers");t.replaceChildren("");let n=document.querySelector("input[name='StartDateTime']").value,i=document.querySelector("input[name='EndDateTime']").value;s("label",t,"Choisissez les conducteurs parmis ceux disponibles :");let r=`users/users.php?function=freeDrivers&beginning=${n}&end=${i}`;St(r,"users/users.php?function=user&id=",t,"selectionParticipant",o=>`${o.name} ${o.firstname}`);var a=s("button",t,"Afficher tous les conducteurs");a.addEventListener("click",function(o){o.preventDefault(),ot(e)})}function Gt(e){var t=s("div",e);s("label",t,"Choisissez la direction  :"),s("br",t),x(t,"aller","selectionDirection","aller");var n=s("label",t,"aller");n.setAttribute("for","aller"),s("br",t),x(t,"retour","selectionDirection","retour");var n=s("label",t,"retour");n.setAttribute("for","retour")}function Jt(e){var t=s("div",e);s("label",t,"Choisissez une ligne :"),S.get("lines/lines.php?function=lines").then(n=>{for(var i of n.data){x(t,i.number,"selectionLigne",i.number);var r=s("label",t,"Ligne "+i.number);r.setAttribute("for",i.number)}})}function Or(e){let t=document.querySelector("input[name='StartDateTime']").value,n=document.querySelector("input[name='EndDateTime']").value,i,r,a,o,u;({users:i,drivers:r,buses:a,line:o,direction:u}=Rr());let c=`timeslots/timeslots.php?function=create&beginning=${t}&end=${n}&type=${e}`,l=!1;switch(e){case"1":[r,a,o,u].includes("")||(c+=`&users=${r}&buses=${a}&lines=${o}&directions=${u}`,l=!0);break;case"2":i!=""&&(c+=`&users=${i}`,l=!0);break;case"3":r!=""&&(c+=`&users=${r}`,l=!0);break;default:c="";break}return l?ye("REUSSITE","Le créneau à bien été ajouté !"):ee("ATTENTION","Formulaire invalide !"),c}const Br=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Ajout de crénaux"),s("p",e," Rentrez les informations suivantes : ",["presentation"]);const t=s("div",e);s("label",t,"Entrez la date de début du créneau :"),A(t,"datetime-local","StartDateTime"),s("br",t),s("label",t,"Entrez la date de fin du creneau :"),A(t,"datetime-local","EndDateTime"),s("br",t);var n=s("div",t);s("label",n,"Choisissez le type du créneau :"),S.get("timeslots/timeslots.php?function=types").then(a=>{for(var o of a.data){x(n,o.name,"selectionType",o.id).addEventListener("click",function(){var c=Vt();switch(i.replaceChildren(""),c){case"1":st(i),ot(i),Jt(i),Gt(i);break;case"2":at(i);break;case"3":ot(i);break;default:st(i),at(i),Jt(i),Gt(i);break}});var u=s("label",n,o.name);u.setAttribute("for",o.name)}});const i=s("div",t);s("div",t,"Envoyer",["submitButton"]).addEventListener("click",function(){let a=Or(Vt());$(a,()=>L("/espace-admin"),"Le créneau a bien été ajouté","Le créneau n'a pas pu être ajouté")})},pe=e=>{e.remove(),document.querySelector("#app").classList.remove("cache")},wt=(e,t,n)=>{S.get("timeslots/timeslots.php?function=delete&id="+t.id).then(function(i){i.data?(ye("BRAVO","Le créneau a bien été supprimé"),n.remove(),pe(e)):ee("ERREUR","Le créneau n'a pas pu être supprimé")})},_t=(e,t,n,i)=>{S.get(n).then(r=>{for(var a of r.data){var o;a.id?o=F(e,a.id,i,a.id):o=F(e,a.number,i,a.number),(a.id&&t.includes(a.id)||a.number&&t.includes(a.number))&&(o.checked=!0);var u;a.firstname?(u=s("label",e,a.firstname.substr(0,1)+"."+a.name),u.setAttribute("for",a.id)):a.id_bus_type?(u=s("label",e,a.id),u.setAttribute("for",a.id)):(u=s("label",e,a.number),u.setAttribute("for",a.number))}})},qr=(e,t)=>_t(e,t,"buses/buses.php?function=buses","selectionBus"),Dn=(e,t)=>_t(e,t,"users/users.php?function=users","selectionParticipant"),Nr=(e,t)=>_t(e,t,"lines/lines.php?function=lines","selectionLigne"),At=(e,t,n,i,r,a,o)=>{S.get(t).then(u=>{if(pe(e),u.data){let c=new Date(n);Z(i,c,o),ye("BRAVO",r)}else ee("ERREUR",a)})},Pr=(e,t,n=null,i=!1)=>{S.get(`timeslots/timeslots.php?function=timeslot&id=${t.id}`).then(r=>{e.replaceChildren(""),s("div",e,"<< Retour",["return"]).onclick=()=>pe(e),s("label",e,"Début :",["form-info"]),A(e,"datetime-local","StartDateTime").value=r.data.begining,s("label",e,"Fin :",["form-info"]),A(e,"datetime-local","EndDateTime").value=r.data.end;var a=[];for(var o of r.data.buses)a.push(o.id);var u=s("div",e);s("div",u,"Bus :",["form-info"]),qr(u,a);var c=[];for(var l of r.data.users)c.push(l.id);var d=s("div",e);s("div",d,"Participants :",["form-info"]),Dn(d,c);var m=[];for(var h of r.data.lines)m.push(h.number);var y=s("div",e);s("div",y,"Ligne :",["form-info"]),Nr(y,m);var v=!0;for(var h of r.data.lines)(h.direction="retour")&&(v=!1);var b=s("div",e);s("div",b,"Direction :",["form-info"]);var k=x(b,"aller","selectionDirection","aller"),N=s("label",b,"aller");N.setAttribute("for","aller"),s("br",b);var D=x(b,"retour","selectionDirection","retour"),N=s("label",b,"retour");N.setAttribute("for","retour"),v?k.checked=!0:D.checked=!0,s("div",e,"Modifier",["modifButton"]).addEventListener("click",function(){let O=document.querySelector("input[name='StartDateTime']").value,z=document.querySelector("input[name='EndDateTime']").value,B=Lt(),se=wn(),ne=An(),ae=_n(),V=`timeslots/timeslots.php?function=update&id=${t.id}&beginning=${O}&end=${z}`;V+=B?`&users=${B}`:"&users=",V+=se?`&buses=${se}`:"&buses=",V+=ne?`&lines=${ne}`:"&lines=",V+=ne&&ae?`&directions=${ae}`:"&directions=",At(e,V,O,n,"La conduite a bien été modifiée","La conduite n'a pas pu être modifiée",i)})})},Ur=(e,t,n=null,i=!1)=>{S.get(`timeslots/timeslots.php?function=timeslot&id=${t.id}`).then(r=>{e.replaceChildren(""),s("div",e,"<< Retour",["return"]).onclick=()=>pe(e),s("label",e,"Début :"),A(e,"datetime-local","StartDateTime").value=r.data.begining,s("label",e,"Fin :"),A(e,"datetime-local","EndDateTime").value=r.data.end;var a=[];for(var o of r.data.users)a.push(o.id);var u=s("div",e);s("div",u,"Participants :"),Dn(u,a),s("div",e,"Modifier",["modifButton"]).addEventListener("click",function(){let l=document.querySelector("input[name='StartDateTime']").value,d=document.querySelector("input[name='EndDateTime']").value,m=Lt(),h=`timeslots/timeslots.php?function=update&id=${t.id}&beginning=${l}&end=${d}`;h+=m?`&users=${m}`:"&users=",h+="&buses=&lines=&directions=",At(e,h,l,n,"La réunion a bien été modifiée","La réunion n'a pas pu être modifiée",i)})})},$r=(e,t,n=null,i=!1)=>{S.get(`timeslots/timeslots.php?function=timeslot&id=${t.id}`).then(r=>{e.replaceChildren(""),s("div",e,"<< Retour",["return"]).onclick=()=>pe(e),s("label",e,"Début :"),A(e,"datetime-local","StartDateTime").value=r.data.begining,s("label",e,"Fin :"),A(e,"datetime-local","EndDateTime").value=r.data.end;var a="";for(var o of r.data.users)a+=o.id;s("div",e,"Modifier",["modifButton"]).addEventListener("click",function(){let c=document.querySelector("input[name='StartDateTime']").value,l=document.querySelector("input[name='EndDateTime']").value,d=`timeslots/timeslots.php?function=update&id=${t.id}&beginning=${c}&end=${l}&users=${a}`;d+="&buses=&lines=&directions=",At(e,d,c,n,"L'indisponiblité a bien été modifiée","L'indisponibilité n'a pas pu être modifiée",i)})})},Mr=(e,t,n,i,r=null,a=!1)=>{let o=T(new Date(t.begining).getHours()),u=T(new Date(t.begining).getMinutes()),c=T(new Date(t.end).getHours()),l=T(new Date(t.end).getMinutes());s("p",e,t.name,["task-name"]),s("div",e,"Participants : ",["form-info"]),t.users.forEach(h=>{s("em",e,h.firstname+" "+h.name+", ")});const d=s("div",e);s("span",d,"Début : ",["form-info"]),d.innerHTML+=o+":"+u;const m=s("div",e);if(s("span",m,"Fin : ",["form-info"]),m.innerHTML+=c+":"+l,i=="Directeur"){const h=s("div",e,null,["btn-task"]);s("div",h,"Modifier",["modifButton"]).onclick=()=>Ur(e,t,r,a),s("div",h,"Supprimer",["delButton"]).onclick=()=>wt(e,t,n)}return e},Fr=(e,t,n,i,r=null,a=!1)=>{let o=T(new Date(t.begining).getHours()),u=T(new Date(t.begining).getMinutes()),c=T(new Date(t.end).getHours()),l=T(new Date(t.end).getMinutes());s("p",e,t.name,["task-name"]),s("div",e,"Conducteur : ",["form-info"]),t.users.forEach(h=>{s("em",e,h.firstname+" "+h.name+", ")}),s("div",e,"Bus affectés : ",["form-info"]),t.buses.forEach(h=>{s("em",e,h.id+" ("+h.nb_places+" places), ")}),s("div",e,"Sur la ligne : ",["form-info"]),t.lines.forEach(h=>{s("em",e,h.number+" ("+h.direction+")")});const d=s("div",e);s("span",d,"Début : ",["form-info"]),d.innerHTML+=o+":"+u;const m=s("div",e);if(s("span",m,"Fin : ",["form-info"]),m.innerHTML+=c+":"+l,["Responsable Logistique","Directeur"].includes(i)){const h=s("div",e,null,["btn-task"]);s("div",h,"Modifier",["modifButton"]).onclick=()=>Pr(e,t,r,a),s("div",h,"Supprimer",["delButton"]).onclick=()=>wt(e,t,n)}return e},xr=(e,t,n,i,r=null,a=!1)=>{let o=T(new Date(t.begining).getHours()),u=T(new Date(t.begining).getMinutes()),c=T(new Date(t.end).getHours()),l=T(new Date(t.end).getMinutes()),d=ce(new Date(t.begining).getDay()),m=new Date(t.begining).getDate(),h=Ne(new Date(t.begining).getMonth());if(s("p",e,t.name,["task-name"]),s("p",e,"Noté comme indisponible le "+d+" "+m+" "+h),s("p",e,"de "+o+":"+u+" à "+c+":"+l),i=="Conducteur"){const y=s("div",e,null,["btn-task"]);s("div",y,"Modifier",["modifButton"]).onclick=()=>$r(e,t,r,a),s("div",y,"Supprimer",["delButton"]).onclick=()=>wt(e,t,n)}return e},Hr=(e,t,n,i=null,r=!1)=>{document.querySelector("#app").classList.add("cache");const u=JSON.parse(sessionStorage.getItem("userData")).role,c=document.querySelector("#task");c&&c.remove();const l=s("div",e,null,null,"task");switch(s("div",l,"<< Retour",["return"]).onclick=()=>pe(l),t.name){case"Conduite":Fr(l,t,n,u,i,r);break;case"Réunion":Mr(l,t,n,u,i,r);break;case"Indisponibilité":xr(l,t,n,u,i,r);break;default:s("h2",l,"Une erreur est survenue");break}},jr=async(e,t=null)=>{let n=[],i=Pe(e),r=Pe(new Date(new Date(e).setDate(e.getDate()+1)));const a=JSON.parse(sessionStorage.getItem("userData"));if(t!=null&&t.firstname){let o=t.id;await S.get(`timeslots/timeslots.php?function=timeslotbyuser&user=${o}&beginning=${i}&end=${r}`).then(u=>n=u.data)}else if(t!=null&&t.nb_places){let o=t.id;await S.get(`timeslots/timeslots.php?function=timeslotbybus&bus=${o}&beginning=${i}&end=${r}`).then(u=>n=u.data)}else if(t!=null&&t.number){let o=t.number;await S.get(`timeslots/timeslots.php?function=timeslotbyline&line=${o}&beginning=${i}&end=${r}`).then(u=>n=u.data)}else{let o=a.id;await S.get(`timeslots/timeslots.php?function=timeslotbyuser&user=${o}&beginning=${i}&end=${r}`).then(u=>n=u.data)}return[...n]},Ir=e=>{e.dataTransfer.setData("text/plain",e.target.id)},zr=(e,t)=>e=="Conducteur"?t=="Indisponibilité":e=="Responsable Logistique"?t=="Conduite":t=="Conduite"||t=="Réunion",Wt=e=>{if(e.firstname)return e.firstname.substr(0,1)+e.name.substr(0,1);if(e.nb_places)return"Bus "+e.id;if(e.number)return"L"+e.number},Dt=async(e,t,n=null,i=!1,r=null,a=0)=>{const u=JSON.parse(sessionStorage.getItem("userData")).role,c=document.querySelector("#footer"),l=await jr(e,n);if(i&&!r){let d=s("div",t,Wt(n),["initiales"]);d.style.left=25*a+"px",d.style.width=25+"px"}else if(i&&r){let d=s("div",t,Wt(r[a]),["initiales"]);d.style.left=150/r.length*a+"px",d.style.width=150/r.length+"px"}l.length>0&&l.forEach(d=>{let m;i?m=s("div",t,null,["timeslot_multi_"+d.name],[`ts${d.id}`]):m=s("div",t,null,["timeslot"],[`ts${d.id}`]),m.addEventListener("click",()=>Hr(c,d,m,n,i)),zr(u,d.name)&&m.setAttribute("draggable",!0);let h=new Date(d.begining).getHours(),y=new Date(d.begining).getMinutes(),v=new Date(d.end).getHours(),b=new Date(d.end).getMinutes(),k=(v-h)*60+(b-y),D=t.clientHeight*(h*60+y-6*60)/((23-6)*60),N=k*t.clientHeight/((23-6)*60);if(m.style.top=`${D}px`,m.style.height=`${N}px`,i&&r)m.style.left=150/r.length*a+"px",m.style.width=150/r.length+"px";else if(i&&!r)m.style.left=25*a+"px",m.style.width=25+"px";else{const O=s("div",m,null,["timeslot__color",d.name]),z=s("div",O,null,["div-color"]);z.style.height=k+"px"}const U=s("div",m,null,["timeslot__houres"]);if(m.getAttribute("draggable")&&(m.ondragstart=Ir),!i){s("h2",U,T(h)+":"+T(y),["beginning"]),s("h2",U,T(v)+":"+T(b),["end"]);const O=s("div",m,null,["timeslot__body"]);switch(d.name){case"Conduite":s("h3",O,"Conduite");break;case"Réunion":s("h3",O,"Réunion");break;case"Indisponibilité":s("h3",O,"Indisponible");break;default:s("h3",O,"ERREUR");break}}if(i)s("div",m,d.name.substr(0,1).toUpperCase(),["multi-info"]);else{const O=s("div",m,null,["timeslot__goto"]);s("i",O,null,["fa-solid","fa-chevron-right"])}})},Vr=(e,t,n=null,i=!1,r=null)=>{Dt(t,e,n,i,r)},Gr=async(e,t)=>{let n=[],i=0;await S.get("users/users.php?function=bytype&type=3").then(r=>n=r.data);for(let r of n)Dt(t,e,r,!0,null,i),i+=1},Jr=async()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("p",e,"Sélectionnez au maximum 4 agendas que vous souhaitez afficher",["presentation"]);let t=[],n=[],i=[],r=[];await S.get("users/users.php?function=users").then(l=>t=l.data),await S.get("buses/buses.php?function=buses").then(l=>n=l.data),await S.get("lines/lines.php?function=lines").then(l=>i=l.data);const a=s("div",e,null,["multi-form"]),o=s("div",a,"Utilisateurs :",["choix"]);for(let l of t){let d=s("div",o,null,["selectMulti"]);F(d,l.id,"selectionUser",l.id).onclick=async()=>r=await Ke(),s("div",d,l.firstname+" "+l.name.toUpperCase())}const u=s("div",a,"Bus :",["choix"]);for(let l of n){let d=s("div",u,null,["selectMulti"]);F(d,l.id,"selectionBus",l.id).onclick=async()=>r=await Ke(),s("div",d,l.id)}const c=s("div",a,"Lignes :",["choix"]);for(let l of i){let d=s("div",c,null,["selectMulti"]);F(d,l.number,"selectionLine",l.number).onclick=async()=>r=await Ke(),s("div",d,"Ligne "+l.number)}s("div",a,"Afficher",["modifButton"]).addEventListener("click",function(){r.length>4?ee("ERREUR","Vous ne pouvez sélectionner que 4 entités"):r.length==1?Z(r[0]):Z(void 0,void 0,!0,r)})},Ke=async()=>{let e=[];for(let t of document.querySelectorAll("input[name='selectionUser']"))t.checked&&await S.get("users/users.php?function=user&id="+t.id).then(n=>e.push(n.data));for(let t of document.querySelectorAll("input[name='selectionBus']"))t.checked&&await S.get("buses/buses.php?function=bus&id="+t.id).then(n=>e.push(n.data));for(let t of document.querySelectorAll("input[name='selectionLine']"))t.checked&&await S.get("lines/lines.php?function=line&number="+t.id).then(n=>e.push(n.data));return e},Wr=async(e,t,n)=>{let i=0,r=await n;for(let a of r)Dt(t,e,a,!0,r,i),i+=1};const Kr=(e,t,n=null,i=!1,r=null)=>{const a=s("div",e,null,["calandar__header"]),o=s("div",a,null,["left-button"]);s("i",o,null,["fa-solid","fa-chevron-left"]);const u=s("div",a,null,["center-div"]);s("h2",u,Ne(t.getMonth())+" "+t.getFullYear(),["year"]);const c=s("div",a,null,["right-button"]);return s("i",c,null,["fa-solid","fa-chevron-right"]),o.addEventListener("click",()=>ut(e,new Date(new Date(t).setDate(t.getDate()-7)),n,i,r)),c.addEventListener("click",()=>ut(e,new Date(new Date(t).setDate(t.getDate()+7)),n,i,r)),a},Xr=e=>{let t=0;for(let n=6;n<=22;n++){s("p",e,`${T(n)}:00`,["heure"]).style.setProperty("--item",t);let r=s("div",e,null,["deux-heures",`${n}:00`]),a=0,o=3;for(let u=0;u<o;u++)s("div",r,null,["trente-min",`${a>=60?n+1:n}:${a%60}`,`${u===Math.floor((o-1)/2)?"mid":null}`]),a+=30;t++}return e},Yr=e=>{e.preventDefault(),e.target.classList.toggle("dragover")},Qr=e=>e.preventDefault(),Zr=e=>e.target.classList.toggle("dragover"),es=(e,t,n,i=!1,r=null)=>{e.target.classList.toggle("dragover"),e.dataTransfer.getData("text/plain").substring(0,2)==="ts"&&e.target.classList.contains("drop")&&ts(e,t,n,i,r)},ts=async(e,t,n,i=!1,r=null)=>{let a=document.querySelector("#app"),o=e.dataTransfer.getData("text/plain");o=o.substring(2,o.length);let u,c,l;await S.get(`timeslots/timeslots.php?function=timeslot&id=${o}`).then(E=>u=E.data),await S.get("timeslots/timeslots.php?function=types").then(E=>c=E.data),c.forEach(E=>{E.id==u.id_time_slot_type&&(l=E)});let d=new Date(u.begining),m=ce(d.getDay()),h=d.getDate(),y=Ne(d.getMonth()),v=d.getFullYear(),b=d.getHours(),k=d.getMinutes(),D=Math.floor((23-6)*60*e.offsetY/e.target.clientHeight),N=Math.floor(D/60)+6,U=Math.floor(D%60),O=Lr(N,U),z=wr(U),B=new Date(t);for(;B.getDay()!=Er(e.target.id);)B=new Date(new Date(B).setDate(B.getDate()+1));B.setHours(O),B.setMinutes(z);let se=ce(B.getDay()),ne=B.getDate(),ae=Ne(B.getMonth()),V=B.getFullYear(),me=new Date(u.end),je=me.getHours()-b,Le=me.getMinutes()-k,he=new Date(B);he.setHours(O+je),he.setMinutes(z+Le);const oe=s("div",a,null,["overlay"]),G=s("div",oe,null,["validation"]),ue=s("div",G,"<< Retour",["return"]);s("h1",G,"Voulez vous effectuer cette action ?");const ie=s("div",G,null,["content"]);s("p",ie,`Déplacer le créneau de type ${l.name} du :`),s("p",ie,`${m} ${T(h)} ${y} ${v} à ${T(b)}h${T(k)}`,["important"]),s("p",ie,"Vers le :"),s("p",ie,`${se} ${T(ne)} ${ae} ${V} à ${T(O)}h${T(z)}`,["important"]);const we=s("div",G,null,["button-container"]),p=s("button",we,"Annuler",["second-button"]),g=s("button",we,"Valider",["primary-button"]);oe.onclick=E=>{E.preventDefault(),E.stopPropagation(),E.target.remove()},G.onclick=E=>{E.preventDefault(),E.stopPropagation()},ue.onclick=()=>{G.remove(),oe.remove()},p.onclick=()=>{G.remove(),oe.remove()},g.onclick=async()=>{let E,R=u.id,_=Pe(B),M=Pe(he),K="",_e="",Ae="",Ct="";u.users.forEach(X=>K+=`${X.id},`),u.buses.forEach(X=>_e+=`${X.id},`),u.lines.forEach(X=>{Ae+=`${X.number},`,Ct+=`${X.direction},`}),await S.get(`timeslots/timeslots.php?function=update&id=${R}&beginning=${_}&end=${M}&users=${K}&buses=${_e}&lines=${Ae}&directions=${Ct}`).then(X=>E=X.data),Z(n,B,i,r),E?ye("Bravo !","Le créneau a bien été modifié"):ee("Erreur","Le créneau n'a pas pu être modifié")}},ns=(e,t,n,i=!1,r=null)=>{e.ondragenter=Yr,e.ondragover=Qr,e.ondragleave=Zr,e.ondrop=a=>es(a,t,n,i,r)},is=(e,t,n=null,i=!1,r=null)=>{const a=s("div",e,null,["calandar__body"]),o=new Date(Date.now());let u=new Date(t),c=Sr(u),l=c;const d=s("div",a,null,["days"]),m=s("div",a,null,["timeslots"]);s("div",d,null,["days__day"]);const h=s("div",m,null,["timeslots__day","col-heures"]);Xr(h);for(let y=0;y<7;y++){let v=ce(l.getDay()),b=l.getDate(),k=s("div",d,v+" "+b,["days__day"]),D;i?D=s("div",m,"",["timeslots__day_multi","drop"],v):D=s("div",m,"",["timeslots__day","drop"],v),i&&r==null?Gr(D,l):i&&r?Wr(D,l,r):Vr(D,l,n,i,r),ns(D,c,n,i,r),o.getFullYear()==l.getFullYear()&&o.getMonth()==l.getMonth()&&o.getDate()==l.getDate()&&k.classList.add("today"),l=new Date(new Date(l).setDate(l.getDate()+1))}return e},ut=(e,t,n=null,i=!1,r=null)=>(e.replaceChildren(""),Kr(e,t,n,i,r),is(e,t,n,i,r),e),Kt=(e,t=null,n=!1,i=null,r=new Date().getFullYear(),a=new Date().getMonth(),o=new Date().getDate())=>{let u=new Date(r,a,o);const c=s("div",e,null,["calandar"]);return ut(c,u,t,n,i),e},rs=e=>{let t="(";for(let n of e)n.firstname?t+=n.firstname+" "+n.name.toUpperCase():n.nb_places?t+="Bus n°"+n.id:n.number&&(t+="Ligne "+n.number),t+=", ";return t=t.slice(0,-2)+")",t},ss=(e=null,t=null,n=!1,i=null)=>{const r=document.querySelector("#app");r.replaceChildren("");const a=s("div",r,"<< Retour",["return"]);return a.onclick=()=>{fe(()=>L("/espace-admin"),()=>L("/espace-admin"),()=>L("/espace-utilisateur"))},e&&e.firstname?s("h2",r,"Agenda de "+e.firstname+" "+e.name.toUpperCase(),["mainTitle"]):e&&e.nb_places?s("h2",r,"Agenda du bus n°"+e.id,["mainTitle"]):e&&e.number?s("h2",r,"Agenda de la ligne "+e.number,["mainTitle"]):n&&!i?s("h2",r,"Agenda des chauffeurs",["mainTitle"]):n&&i?s("h2",r,"Agenda multiple "+rs(i),["mainTitle"]):s("h2",r,"Votre Agenda",["mainTitle"]),t?Kt(r,e,n,i,t.getFullYear(),t.getMonth(),t.getDate()):Kt(r,e,n,i),r},Z=(e=null,t=null,n=!1,i=null)=>{const r=document.querySelector("#app");return r.replaceChildren(""),fe(),ss(e,t,n,i),r},as=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Ajout d'Utilisateur"),s("p",e,"Rentrez les informations suivantes :",["presentation"]);const t=s("div",e);s("br",t),s("label",t,"Entrez le prénom de l'utilisateur :"),A(t,"text","nameUser"),s("br",t),s("label",t,"Entrez le nom de l'utilisateur :"),A(t,"text","lastNameUser"),s("br",t),s("label",t,"Entrez le login de l'utilisateur :"),A(t,"text","loginUser"),s("br",t),s("label",t,"Entrez son email :"),A(t,"email","mailUser"),s("br",t),s("label",t,"Entrez la date de naissance de l'utilisateur :"),A(t,"date","birthDate"),s("br",t);var n=s("div",t);s("label",n,"Choisissez le type de l'utilisateur :"),S.get("users/users.php?function=usertypes").then(r=>{for(var a of r.data){s("br",n),x(n,a.id,"typeUser",a.id);var o=s("label",n,a.name);o.setAttribute("for",a.id)}}),s("div",t,"Envoyer",["submitButton"]).addEventListener("click",function(){let r=document.querySelector("input[name='loginUser']").value,a=document.querySelector("input[name='birthDate']").value,o=document.querySelector("input[name='lastNameUser']").value,u=document.querySelector("input[name='nameUser']").value,c=document.querySelector("input[name='mailUser']").value,l=I("input[name='typeUser']"),d=`users/users.php?function=create&login=${r}&password=gobus123&confirm=gobus123&date=${a}&name=${o}&firstname=${u}&email=${c}&type=${l}`;$(d,()=>L("/espace-admin"),"L'utilisateur a bien été ajouté","L'utilisateur n'a pas pu être ajouté")})},os=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Modification d'Utilisateur"),s("p",e,"Choisissez l'utilisateur à modifier :",["presentation"]);const t=s("div",e);var n=s("div",t);S.get("users/users.php?function=users").then(i=>{for(var r of i.data){x(n,r.id,"selectionUser",r.id).addEventListener("click",function(){var o=I("input[name='selectionUser']");S.get(`users/users.php?function=user&id=${o}`).then(u=>{e.replaceChildren("");const c=s("div",e);s("br",c),s("label",c,"Le prénom de l'utilisateur :"),A(c,"text","nameUser").value=u.data.firstname,s("br",c),s("label",c,"Le nom de l'utilisateur :"),A(c,"text","lastNameUser").value=u.data.name,s("br",c),s("label",c,"Le login de l'utilisateur :"),A(c,"text","loginUser").value=u.data.login,s("br",c),s("label",c,"L'email de l'utilisateur :"),A(c,"email","mailUser").value=u.data.email,s("br",c),s("label",c,"La date de naissance de l'utilisateur :"),A(c,"date","birthDate").value=u.data.birth_date,s("br",c),s("div",c,"Modifier",["submitButton"]).addEventListener("click",function(){let d=document.querySelector("input[name='loginUser']").value,m=document.querySelector("input[name='mailUser']").value,h=`users/users.php?function=update&id=${o}&email=${m}&login=${d}`;$(h,()=>L("/espace-admin"),"L'utilisateur a bien été ajouté","L'utilisateur n'a pas pu être ajouté")})})});var a=s("label",n,r.name+" "+r.firstname);a.setAttribute("for",r.id)}})},us=()=>{for(var e of document.querySelectorAll("input[name='selectionUSer']"))if(e.checked){let t=`users/users.php?function=delete&id=${e.value}`;$(t,()=>L("/espace-admin"),"L'utilisateur a bien été supprimé","L'utilisateur n'a pas pu être supprimé")}},ls=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Suppression d'Utilisateur"),s("p",e,"Rentrez les informations suivantes :",["presentation"]);const t=s("div",e);var n=s("div",t);s("label",n,"Choisissez le(s) utilisateur(s) à supprimer :"),S.get("users/users.php?function=users").then(r=>{for(var a of r.data){s("br",n),F(n,a.id,"selectionUSer",a.id);var o=s("label",n,a.name+" "+a.firstname);o.setAttribute("for",a.id)}});const i=s("div",t,"Supprimer",["submitButton"]);i.onclick=()=>us()},cs=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>redirect("/espace-admin")),s("h2",e,"Disponibilité des bus"),s("p",e,"Afficher les bus disponibles selon la plage horaire :",["presentation"]);const t=s("div",e);s("label",t,"Début :"),A(t,"datetime-local","StartDateTime"),s("label",t,"Fin :"),A(t,"datetime-local","EndDateTime"),s("div",t,"Envoyer",["submitButton"]).addEventListener("click",function(){let i=document.querySelector("input[name='StartDateTime']").value,r=document.querySelector("input[name='EndDateTime']").value;S.get("buses/buses.php?function=buses").then(function(a){let o=a.data,u=document.querySelector("#lstBuses");u&&u.remove(),u=s("ul",t,"Liste des bus disponibles :",["ul-info"],"lstBuses");for(let c of o)S.get("buses/buses.php?function=available&id="+c.id+"&beginning="+i+"&end="+r).then(function(l){l.data&&s("li",u,"Bus n°"+c.id+" est disponible")})})})},ds=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>redirect("/espace-admin")),s("h2",e,"Ajout d'un bus "),s("p",e,"Rentrez les informations suivantes :",["presentation"]);const t=s("div",e);var n=s("div",t);s("label",n,"Choisissez le type de bus :"),S.get("buses/buses.php?function=bustypes").then(r=>r.data.forEach(a=>Ue(n,a,"typeBus"))),s("div",t,"Envoyer",["submitButton"]).addEventListener("click",function(){for(var r of document.querySelectorAll("input[name='typeBus']"))r.checked&&$(`buses/buses.php?function=create&type=${r.value}`,()=>redirect("/espace-admin"),"Le bus a bien été ajouté","Le bus n'a pas pu être ajouté")})},fs=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>redirect("/espace-admin")),s("h2",e,"Modification d'un bus "),s("p",e,"Rentrez les informations suivantes :",["presentation"]);const t=s("div",e);var n=s("div",t);s("label",n,"Choisissez le bus à modifier :"),S.get("buses/buses.php?function=buses").then(a=>a.data.forEach(o=>Ue(n,o,"idBus")));var i=s("div",t);s("label",i,"Choisissez le type de bus :"),S.get("buses/buses.php?function=bustypes").then(a=>a.data.forEach(o=>Ue(i,o,"typeBus"))),s("div",t,"Modifier",["submitButton"]).addEventListener("click",function(){let a=I("input[name='idBus']"),o=I("input[name='typeBus']"),u=`buses/buses.php?function=updatebus&id=${a}&type=${o}`;$(u,()=>redirect("/espace-admin"),"Le bus a bien été modifié","Le bus n'a pas pu être modifié")})},ps=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>redirect("/espace-admin")),s("h2",e,"Suppression d'un bus "),s("p",e,"Rentrez les informations suivantes :",["presentation"]);const t=s("div",e);var n=s("div",t);s("label",n,"Choisissez le(s) bus à supprimer :"),S.get("buses/buses.php?function=buses").then(r=>r.data.forEach(a=>Ue(n,a,"idBus"))),s("div",t,"Supprimer",["submitButton"]).addEventListener("click",function(){for(var r of document.querySelectorAll("input[name='idBus']")){let a="buses/buses.php?function=delete&id=";r.checked&&(a+=r.value,$(a,()=>redirect("/espace-admin"),"Le bus a bien été supprimé","Le bus n'a pas pu être supprimé"))}})},ms=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Ajout d'une Ligne "),s("p",e,"Rentrez les informations suivantes :",["presentation"]);const t=s("div",e);s("label",t,"Entrez le numero de la ligne à rentrer :",["form-info"]),A(t,"integer","number"),s("label",t,"Entrez la durée d'un trajet sur cette ligne (en minutes) :",["form-info"]),A(t,"integer","travel_time");var n=s("div",t);S.get("lines/lines.php?function=typesline").then(r=>{for(var a of r.data){s("br",n),x(n,a.id_type,"selectionTypeLine",a.id_type);var o=s("label",n,"Type - "+a.name);o.setAttribute("for",a.id_type)}}),s("div",t,"Envoyer",["submitButton"]).addEventListener("click",function(){var r=I("input[name='selectionTypeLine']");let a=document.querySelector("input[name='number']").value,o=document.querySelector("input[name='travel_time']").value;$(`lines/lines.php?function=create&number=${a}&travel_time=${o}&id_type=${r}`,()=>L("/espace-admin"),"La ligne a bien été ajoutée","La ligne n'a pas pu être ajoutée")})},hs=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Suppression d'une Ligne "),s("p",e,"Choisir la(les) ligne(s) à supprimer :",["presentation"]);const t=s("div",e);S.get("lines/lines.php?function=lines").then(n=>{for(var i of n.data){let o=s("div",t);F(o,i.number,"selectionLigne",i.number);var r=s("label",o,"Ligne "+i.number);r.setAttribute("for",i.number)}s("div",t,"Supprimer",["submitButton"]).addEventListener("click",function(){for(var o of document.querySelectorAll("input[name='selectionLigne']"))o.checked&&$(`lines/lines.php?function=delete&number=${o.value}`,()=>L("/espace-admin"),"La ligne a bien été supprimée","La ligne n'a pas pu être supprimée")})})},vs=(e,t,n)=>{x(t,n.number,"selectionLigne",n.number).addEventListener("click",function(){var r=I("input[name='selectionLigne']");S.get(`lines/lines.php?function=line&number=${r}`).then(a=>{e.replaceChildren(""),s("label",e,"Numero de la ligne :",["form-info"]),A(e,"integer","number").value=a.data.number,s("label",e,"Durée d'un trajet sur cette ligne (en minutes) :",["form-info"]),A(e,"integer","travel_time").value=a.data.travel_time,s("div",e,"Modifier",["submitButton"]).addEventListener("click",function(){let u=document.querySelector("input[name='travel_time']").value,c=document.querySelector("input[name='number']").value;$(`lines/lines.php?function=updateline&number=${c}&travel_time=${u}`,()=>L("/espace-admin"),"La ligne a bien été modifiée","La ligne n'a pas pu être modifiée")})})});var i=s("label",t,"Ligne "+n.number);i.setAttribute("for",n.number)},gs=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Modification d'une Ligne "),s("p",e,"Choisir la ligne à modifier :",["presentation"]);const t=s("div",e);var n=s("div",t);S.get("lines/lines.php?function=lines").then(i=>{for(var r of i.data)vs(t,n,r)})},bs=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Verification de couvertures des lignes"),s("p",e,"Indiquer la semaine à verifier");const t=s("div",e);A(t,"week","semaine"),s("div",t,"Envoyer").addEventListener("click",function(){let i=document.querySelector("input[name='semaine']").value;$(`lines/lines.php?function=WeekCovered&week=${i}`,()=>L("/espace-admin"),"Le semaine est bien couverte","Il semblerait que tout ne soit pas bien rempli...")})},ys=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Remplissage automatique de la semaine"),s("p",e,"Indiquer la semaine à remplir, attention cela supprime les créneaux de conduite déjà ajoutés");const t=s("div",e);A(t,"week","semaine"),s("div",t,"Envoyer").addEventListener("click",function(){let i=document.querySelector("input[name='semaine']").value;$(`lines/lines.php?function=coverWeek&week=${i}`,()=>L("/espace-admin"),"Toutes les conduites de la semaine ont étées ajoutées","Il semblerait que tout ne se soit pas passé comme prévu...")})},Rt=(e,t,n)=>{let i=s("li",e,null,["navBar__item"]),r=s("div",i,n);r.onclick=()=>Z(t)},Rn=e=>{const t=document.querySelector("#app");t.replaceChildren(""),s("div",t,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),e==2?(s("h2",t,"Agenda des responsables logistiques",["mainTitle"]),s("div",t,"Liste des responsables logistiques :",["presentation"])):e==3&&(s("h2",t,"Agenda des chauffeurs",["mainTitle"]),s("div",t,"Liste des chauffeurs :",["presentation"]));const n=s("ul",t,null,["navBar"]);return S.get("users/users.php?function=bytype&type="+e).then(function(i){i.data.forEach(a=>Rt(n,a,`${a.firstname} ${a.name.toUpperCase()}`)),e==3&&(s("div",t,"Vision globale",["submitButton"]).onclick=()=>Z(void 0,void 0,!0))}),t},Es=()=>{document.querySelector("#app").replaceChildren(""),Rn(3)},Ss=()=>{document.querySelector("#app").replaceChildren(""),Rn(2)},Ls=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Agenda des bus",["mainTitle"]),s("div",e,"Liste des bus :",["presentation"]);const t=s("ul",e,null,["navBar"]);S.get("buses/buses.php?function=buses").then(function(n){let i=n.data;for(let r of i)S.get("buses/buses.php?function=bus&id="+r.id).then(function(a){let o=a.data;Rt(t,o,`Bus n°${o.id} (${o.nb_places} places)`)})})},ws=()=>{const e=document.querySelector("#app");e.replaceChildren(""),fe(()=>null,()=>null,()=>null,()=>L("/")),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Agenda des lignes de bus",["mainTitle"]),s("div",e,"Liste des lignes de bus :",["presentation"]);const t=s("ul",e,null,["navBar"]);S.get("lines/lines.php?function=lines").then(function(n){n.data.forEach(r=>Rt(t,r,`Ligne ${r.number} (${_r(r.travel_time)} de trajet)`))})},P=(e,t,n,i,r,a)=>{const o=s("div",e,null,["navBar_container"]);o.onclick=t;const u=s("div",o,null,["navBar_image",n]);s("img",u,null,null,null,i,r),s("div",o,a,["navBar__item"])},_s=()=>{const e=document.querySelector("#app");e.replaceChildren(""),fe(()=>null,()=>null,()=>L("/")),s("h2",e,"Bienvenue sur votre espace Admin"),s("p",e,"Que souhaitez-vous faire ?",["presentation"]);const t=JSON.parse(sessionStorage.getItem("userData")),n=s("nav",e,null,["navBar_Admin"]);return P(n,Z,"rose","src/assets/images/nav_agenda.png","Voir mon agenda","Voir mon agenda"),P(n,Es,"jaune","src/assets/images/nav_gens.png","Voir l'agenda des chauffeurs","Voir l'agenda des chauffeurs"),t.role=="Directeur"&&(P(n,Ss,"orange","src/assets/images/nav_gens.png","Voir l'agenda des responsables logistiques","Voir l'agenda des responsables logistiques"),P(n,Jr,"jaune_clair","src/assets/images/nav_agenda.png","Croiser plusieurs agendas","Croiser plusieurs agendas")),P(n,Ls,"rouge","src/assets/images/nav_bus.png","Voir l'agenda des bus","Voir l'agenda des bus"),P(n,ws,"bleu","src/assets/images/nav_ligne.png","Voir l'agenda des lignes de bus","Voir l'agenda des lignes de bus"),P(n,Br,"gris","src/assets/images/nav_creneau.png","Ajouter un créneaux","Ajouter un créneaux"),P(n,As,"violet","src/assets/images/nav_user.png","Gérer les utilisateurs","Gérer les utilisateurs"),P(n,Ds,"vert","src/assets/images/nav_bus.png","Gérer les bus","Gérer les bus"),P(n,Rs,"bleu_clair","src/assets/images/nav_gestion.png","Gérer les lignes","Gérer les lignes"),P(n,()=>L("/notification-center"),"orange","src/assets/images/nav_notif.png","Afficher les notifications","Afficher les notifications"),e},As=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Gestion des utilisateurs"),s("p",e,"Que souhaitez-vous faire ?",["presentation"]);const t=s("nav",e,null,["navBar"]);return s("div",t,"Ajouter un utilisateur",["navBar__item"]).addEventListener("click",as),s("div",t,"Modifier un utilisateur",["navBar__item"]).addEventListener("click",os),s("div",t,"Supprimer un utilisateur",["navBar__item"]).addEventListener("click",ls),e},Ds=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Gestion des Bus"),s("p",e,"Que souhaitez-vous faire ?",["presentation"]);const t=s("nav",e,null,["navBar"]);return s("div",t,"Voir la disponibilité des bus",["navBar__item"]).addEventListener("click",cs),s("div",t,"Ajouter un bus",["navBar__item"]).addEventListener("click",ds),s("div",t,"Modifier un bus",["navBar__item"]).addEventListener("click",fs),s("div",t,"Supprimer un bus",["navBar__item"]).addEventListener("click",ps),e},Rs=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("div",e,"<< Retour",["return"]).addEventListener("click",()=>L("/espace-admin")),s("h2",e,"Gestion des Lignes"),s("p",e,"Que souhaitez-vous faire ?",["presentation"]);const t=s("nav",e,null,["navBar"]);return s("div",t,"Ajouter une Ligne",["navBar__item"]).addEventListener("click",ms),s("div",t,"Modifier une Ligne",["navBar__item"]).addEventListener("click",gs),s("div",t,"Supprimer une Ligne",["navBar__item"]).addEventListener("click",hs),s("div",t,"Verifier la couverture d'une semaine",["navBar__item"]).addEventListener("click",bs),s("div",t,"Remplissage automatique des conduite de la semaine",["navBar__item"]).addEventListener("click",ys),e},ks=()=>{const e=document.querySelector("#app");e.replaceChildren(""),s("h2",e,"Ajout de créneaux d'indisponibilité"),s("div",e,"<< Retour",["return"]).addEventListener("click",lt),s("p",e,"Renseignez la plage horaire de votre indisponibilité :",["presentation"]);const t=s("div",e);s("label",t,"Début :"),A(t,"datetime-local","StartDateTime"),s("label",t,"Fin :"),A(t,"datetime-local","EndDateTime"),s("div",t,"Envoyer",["submitButton"]).addEventListener("click",function(){let i=document.querySelector("input[name='StartDateTime']").value,r=document.querySelector("input[name='EndDateTime']").value,a=JSON.parse(sessionStorage.getItem("userData")).id;if([i,r].includes(""))ee("ERREUR","L'un des champs du formulaire n'a pas été renseigné");else{let o=`timeslots/timeslots.php?function=create&beginning=${i}&end=${r}&type=3&users=${a}`;$(o,lt,"Votre indisponibilité a bien été ajoutée","Votre indisponibilité n'a pas pu être ajoutée");let u=`Votre créneau d'indisponibilité du ${i} au ${r} a bien été ajouté.`;S.get(`notifications/notifications.php?function=create&title=Attention&message=${Ar(u)}&recipient=`+JSON.parse(sessionStorage.getItem("userData")).id)}})},lt=()=>{const e=document.querySelector("#app");e.replaceChildren(""),redirectUser(()=>L("/"),()=>L("/"),()=>null),s("h2",e,"Bienvenue sur votre espace personnel"),s("p",e,"Que souhaitez-vous faire ?",["presentation"]);const t=s("nav",e,null,["navBar_User"]);return P(t,Z,"rose","src/assets/images/nav_agenda.png","Voir mon agenda","Voir mon agenda"),P(t,ks,"jaune","src/assets/images/nav_creneau.png","Signaler un creneau d'indisponibilité","Signaler un creneau d'indisponibilité"),P(t,()=>L("/notification-center"),"orange","src/assets/images/nav_notif.png","Afficher les notifications","Afficher les notifications"),e};async function kn(e){await fetch("http://localhost/projetL2S4/src/services/notifications/notifications.php?function=read&id="+e)}async function Cn(e){await fetch("http://localhost/projetL2S4/src/services/notifications/notifications.php?function=unread&id="+e)}async function Tn(e){await fetch("http://localhost/projetL2S4/src/services/notifications/notifications.php?function=archive&id="+e)}const kt=(e,t,n,i)=>{s("div",e,t).addEventListener("click",async function(r){r.stopPropagation(),await n(i),$e()})},Xe=(e,t)=>kt(e,"A",Tn,t),Ye=(e,t)=>kt(e,"R",kn,t),Qe=(e,t)=>kt(e,"U",Cn,t),Cs=(e,t,n)=>{switch(e){case"unread":Xe(t,n),Ye(t,n);break;case"read":Xe(t,n),Qe(t,n);break;case"archive":Ye(t,n),Qe(t,n);break;default:Xe(t,n),Ye(t,n),Qe(t,n);break}},Ts=(e,t,n)=>{for(let i of t){let r=s("div",e,null,["divNotif",i.status]),a=i.title,o=i.message;i.title.length>18&&(a=i.title.slice(0,18)+"."),i.message.length>38&&(o=i.message.slice(0,38)+"...");let u=s("div",r,null,["divInfoNotif"]);s("h3",u,a),s("p",u,o),s("p",u,i.date);let c=s("div",r,null,["notif_image"]),l=i.id_notif;Cs(n,c,l),r.addEventListener("click",function(){Os(i,e),kn(l)})}};async function ge(e,t,n){S.get("notifications/notifications.php?function=fetch_"+n+"&id="+t).then(i=>{e.replaceChildren("");var r=s("div",e,null,["divTitresNotif"]);s("p",r,"Titres"),s("hr",r),s("p",r,"Messages"),s("hr",r),s("p",r,"Dates de reception"),s("hr",r),s("p",r,"Actions"),Ts(e,i.data,n)})}function Os(e,t){let n=e.title,i=e.message,r=e.date;t.replaceChildren(""),t.className="oneNotification",s("h3",t,n),s("p",t,i),s("p",t,r);const a=s("div",t,null,["notif_image"]),o=e.id_notif;s("div",a,"Marquer comme non lu").addEventListener("click",function(){Cn(o),$e()}),s("div",a,"Archiver").addEventListener("click",function(){Tn(o),$e()})}const $e=()=>{const e=document.querySelector("#app");e.replaceChildren("");const t=JSON.parse(sessionStorage.getItem("userData")).id,n=s("div",e,"<< Retour",["return"]);n.onclick=()=>{fe(()=>L("/espace-admin"),()=>L("/espace-admin"),()=>L("/espace-utilisateur"))};const i=s("ul",e,null,["navNotif"]);let r=["unread","read","archive","all"];const a=s("div",e);for(var o of r){let l=s("li",i,null,["navNotif_item"]);var u=x(l,o,"selectionStatus",o);u.style.position="fixed",u.style.opacity=0,u.addEventListener("click",async function(){var d=I("input[name='selectionStatus']");switch(d){case"unread":await ge(a,t,"unread");break;case"read":await ge(a,t,"read");break;case"archive":await ge(a,t,"archive");break;default:await ge(a,t,"all");break}});var c=s("label",l,o,["navNotif_name"]);c.setAttribute("for",o)}ge(a,t,"all")};S.defaults.baseURL="http://localhost/projetL2S4/src/services";S.get("createTables.php");ct();qn();const te=new hr("/");te.on("/",vr);te.on("/espace-admin",_s);te.on("/espace-utilisateur",lt);te.on("/connexion",gr);te.on("/disconnect",br);te.on("/notification-center",$e);te.on("*",yr);te.resolve();
